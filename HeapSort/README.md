### HeapSort 堆排序

堆的含义就是：*完全二叉树中任何一个非叶子节点的值均不大于（或不小于）其左，右孩子节点的值。*由上述性质可知大顶堆的堆顶的关键字肯定是所有关键字中最大的，小顶堆的堆顶的关键字是所有关键字中最小的。因此我们可使用大顶堆进行升序排序, 使用小顶堆进行降序排序。

即堆排序（Heapsort）是指利用堆这种数据结构所设计的一种排序算法。堆积是一个近似完全二叉树的结构，并同时满足堆积的性质：即子结点的键值或索引总是小于（或者大于）它的父节点。

**1、堆排序的的基本思想**

​	此处以大顶堆为例，堆排序的过程就是将待排序的序列构造成一个堆，选出堆中最大的移走，再把剩余的元素调整成堆，找出最大的再移走，重复直至有序。

**2、算法描述**

①. 先将初始序列K[1..n]K[1..n]建成一个大顶堆, 那么此时第一个元素K1K1最大, 此堆为初始的无序区.
②. 再将关键字最大的记录K1K1 (即堆顶, 第一个元素)和无序区的最后一个记录 KnKn 交换, 由此得到新的无序区K[1..n−1]K[1..n−1]和有序区K[n]K[n], 且满足K[1..n−1].keys⩽K[n].keyK[1..n−1].keys⩽K[n].key
③. 交换K1K1 和 KnKn 后, 堆顶可能违反堆性质, 因此需将K[1..n−1]K[1..n−1]调整为堆. 然后重复步骤②, 直到无序区只有一个元素时停止.

动图效果如下所示：

堆排序过程:

![image](https://tva1.sinaimg.cn/large/007S8ZIlgy1gi8rse0kqvg30f70a4u0x.gif)

堆排序算法的演示。首先，将元素进行重排，以匹配堆的条件。图中排序过程之前简单的绘出了堆树的结构。

![image](https://tva1.sinaimg.cn/large/007S8ZIlgy1gi8ru53xx5g307s05ydn6.gif)



**3、算法复杂度**

| 平均时间复杂度     | 最好情况           | 最坏情况           | 空间复杂度 |
| :----------------- | :----------------- | :----------------- | :--------- |
| O(nlog2n)O(nlog2⁡n) | O(nlog2n)O(nlog2⁡n) | O(nlog2n)O(nlog2⁡n) | O(1)       |

Tips: **由于堆排序中初始化堆的过程比较次数较多, 因此它不太适用于小序列.** 同时由于多次任意下标相互交换位置, 相同元素之间原本相对的顺序被破坏了, 因此, 它是不稳定的排序.
